{% if collections.faqs %}
  {% set similarQuestionsFound = false %}
  {% set questionCount = 0 %}
  
  <section class="mt-12 pt-8 border-t border-gray-200">
    <h2 class="text-2xl font-bold mb-6 text-gray-900">Related Lead Testing Questions in Cleveland</h2>
    <div class="grid grid-cols-1 gap-6 sm:grid-cols-1 lg:grid-cols-2">
      {% for faq in collections.faqs %}
        {% if faq.data.tags and tags and questionCount < 6 %}
          {% set hasMatchingTag = false %}
          {% if faq.data.tags is string %}
            {% set faqTags = faq.data.tags | split(',') %}
            {% for faqTag in faqTags %}
              {% for currentTag in tags %}
                {% if faqTag | trim == currentTag %}
                  {% set hasMatchingTag = true %}
                {% endif %}
              {% endfor %}
            {% endfor %}
          {% else %}
            {% for faqTag in faq.data.tags %}
              {% for currentTag in tags %}
                {% if faqTag == currentTag %}
                  {% set hasMatchingTag = true %}
                {% endif %}
              {% endfor %}
            {% endfor %}
          {% endif %}
          
          {% if hasMatchingTag and faq.url != page.url %}
            {% set similarQuestionsFound = true %}
            {% set questionCount = questionCount + 1 %}
            <a href="{{ faq.url | url }}" class="block">
              <div class="bg-white shadow-md rounded-xl p-6 hover:shadow-lg transition-shadow duration-200 cursor-pointer">
                <h3 class="text-xl font-semibold mb-2 text-black">
                  {{ faq.data.title }}
                </h3>
                <p class="text-gray-700 mb-4">{{ faq.data.short_answer }}</p>
                {% if faq.data.tags %}
                  {% if faq.data.tags is string %}
                    {% set tagList = faq.data.tags | split(',') %}
                    {% for tag in tagList %}
                      <span class="inline-block bg-blue-100 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded">
                        {{ tag | trim }}
                      </span>
                    {% endfor %}
                  {% else %}
                    {% for tag in faq.data.tags %}
                      <span class="inline-block bg-gray-100 text-gray-800 text-xs font-normal mr-2 px-2.5 py-0.5 rounded">
                        {{ tag }}
                      </span>
                    {% endfor %}
                  {% endif %}
                {% endif %}
              </div>
            </a>
          {% endif %}
        {% endif %}
      {% endfor %}
    </div>
  </section>
  
  {% if not similarQuestionsFound %}
    <script>
      document.querySelector('section').style.display = 'none';
    </script>
  {% endif %}
{% endif %}
